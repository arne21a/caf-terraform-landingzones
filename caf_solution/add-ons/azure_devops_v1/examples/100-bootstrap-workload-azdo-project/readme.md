# README

# About This Example
In this example, we are creating DevOps repositories for a new workload generated by our ASVM. To avoid placing many placeholders in the code, our example is closely based on an actual use case of ours. The created landing zone is called `asvm-integration` for the purposes of this demonstration.

This example includes:
- `azdo_provisioning_credential.tfvars`: Configuring the Terraform DevOps provider with a PAT and org-url.
- `azdo_projects.tfvars`: Creating an Azure DevOps project and enabling needed features.
- `azdo_project_role_assignments.tfvars`: Assigning AAD UPNs or AAD Groups to groups in DevOps.
- `azdo_generic_git_endpoints.tfvars`: Creating generic git endpoints to enable cloning of private DevOps repos as part of the project bootstrapping.
- `azdo_repositories.tfvars`: Bootstrapping preconfigured repositories. Either "uninitialized", "cloned", or forked from public or private repos using the `generic git endpoints`.



```bash
#Note: close previous session if you logged with a different service principal using --impersonate-sp-from-keyvault-url
rover logout

# login a with a user member of the caf-maintainers group

rover \
  --impersonate-sp-from-keyvault-url https://some-keyvault.vault.azure.net/ \
  -lz /tf/caf/landingzones/caf_solution/add-ons/azure_devops_v1 \
  -var-folder /tf/caf/configurations/level3/asvm-integration/devops \
  -tfstate_subscription_id <sub_id> \
  -target_subscription asvm-integration-shared \
  -tfstate asvm-integration_devops_level3.tfstate \
  -env production \
  -level level3 \
  -w asvm-integration-devops \
  -p ${TF_DATA_DIR}/asvm-integration_devops_level3.tfstate.tfplan \
  -a plan

```
